<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>æ–‡å¤©ç©æ–°æ‰‹ç½‘ç»œæ”»é˜²æ¨¡æ‹Ÿ</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #1a1a1a;
            color: #fff;
        }

        .container {
            display: grid;
            grid-template-columns: 1fr 2fr 1fr;
            gap: 20px;
        }

        .attack-panel, .defense-panel, .stats-panel {
            background: #2a2a2a;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.5);
        }

        .simulator-view {
            background: #333;
            padding: 20px;
            border-radius: 10px;
        }

        button {
            background: #d9534f;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
            transition: 0.3s;
        }

        button:hover {
            background: #c9302c;
        }

        .log-container {
            height: 400px;
            overflow-y: auto;
            background: #000;
            padding: 10px;
            border-radius: 5px;
        }

        .log-entry {
            margin: 5px 0;
            padding: 5px;
            border-left: 3px solid #d9534f;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: #444;
            border-radius: 10px;
            margin: 10px 0;
        }

        .progress {
            height: 100%;
            background: #5bc0de;
            border-radius: 10px;
            transition: width 0.3s;
        }

        /* æ–°å¢æ ·å¼ */
        @keyframes attackFlash {
            0% { background-color: inherit; }
            50% { background-color: #ff4444; }
            100% { background-color: inherit; }
        }
        
        .attack-effect {
            animation: attackFlash 0.5s linear;
        }

        .tooltip {
            position: relative;
            display: inline-block;
            border-bottom: 1px dotted #fff;
            cursor: help;
        }

        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background: #333;
            color: #fff;
            text-align: center;
            padding: 5px;
            border-radius: 6px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
        }

        .defense-active {
            border: 2px solid #5bc0de;
            box-shadow: 0 0 10px #5bc0de;
        }

        .stats-panel {
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1>æ–‡å¤©ç© æ–°æ‰‹ç½‘ç»œæ”»é˜²æ¨¡æ‹Ÿ</h1>
    
    <div class="container">
        <div class="attack-panel">
            <h2>æ”»å‡»é€‰é¡¹ <span class="tooltip">(?)
                <span class="tooltiptext">é€‰æ‹©è¦æ¨¡æ‹Ÿçš„æ”»å‡»ç±»å‹ï¼Œè§‚å¯Ÿä¸åŒé˜²å¾¡æªæ–½çš„æ•ˆæœ</span>
            </span></h2>
            <button onclick="startAttack('ddos')">æ¨¡æ‹ŸDDoSæ”»å‡»</button>
            <button onclick="startAttack('bruteforce')">å¯†ç çˆ†ç ´æ”»å‡»</button>
            <button onclick="startAttack('sql')">SQLæ³¨å…¥æ”»å‡»</button>
            <button onclick="startAttack('phishing')">é’“é±¼æ”»å‡»</button>
            <button onclick="startAttack('xss')">XSSè·¨ç«™è„šæœ¬æ”»å‡»</button>
            <button onclick="startAttack('malware')">æ¶æ„è½¯ä»¶ä¼ æ’­</button>
            
            <div id="resourcePanel" style="margin-top:15px">
                æ”»å‡»èµ„æº: <span id="resources">100</span>%
                <div class="progress-bar" style="height:10px">
                    <div class="progress" style="width:100%;background:#4CAF50"></div>
                </div>
            </div>
        </div>

        <div class="simulator-view">
            <h2>æ¨¡æ‹Ÿå™¨çŠ¶æ€</h2>
            <div id="progressBar" class="progress-bar">
                <div class="progress" style="width: 0%"></div>
            </div>
            <h3>å®æ—¶æ—¥å¿—ï¼š</h3>
            <div class="log-container" id="logContainer"></div>
        </div>

        <div class="defense-panel">
            <h2>é˜²å¾¡è®¾ç½® <span class="tooltip">(?)
                <span class="tooltiptext">å¯ç”¨/ç¦ç”¨é˜²å¾¡æªæ–½æ¥è§‚å¯Ÿé˜²æŠ¤æ•ˆæœ</span>
            </span></h2>
            <label><input type="checkbox" id="firewall"> å¯ç”¨é˜²ç«å¢™</label><br>
            <label><input type="checkbox" id="captcha"> å¯ç”¨éªŒè¯ç </label><br>
            <label><input type="checkbox" id="waf"> å¯ç”¨WAF</label><br>
            <label><input type="checkbox" id="ids"> å…¥ä¾µæ£€æµ‹ç³»ç»Ÿ</label><br>
            <label><input type="checkbox" id="2fa"> åŒå› ç´ è®¤è¯</label>
            <h3>é˜²å¾¡çŠ¶æ€ï¼š</h3>
            <div id="defenseStatus"></div>
        </div>
    </div>

    <div class="stats-panel">
        <h3>æ”»é˜²ç»Ÿè®¡</h3>
        <div>æ€»æ”»å‡»æ¬¡æ•°: <span id="totalAttacks">0</span></div>
        <div>æ”»å‡»æˆåŠŸç‡: <span id="successRate">0</span>%</div>
        <div>å½“å‰å¨èƒçº§åˆ«: <span id="threatLevel">ä½</span></div>
    </div>

    <script>
        let isAttacking = false;
        const attackData = {
            ddos: { name: "DDoSæ”»å‡»", duration: 5000 },
            bruteforce: { name: "å¯†ç çˆ†ç ´", duration: 3000 },
            sql: { name: "SQLæ³¨å…¥", duration: 4000 },
            phishing: { name: "é’“é±¼æ”»å‡»", duration: 3500 },
            xss: { name: "XSSæ”»å‡»", duration: 2500 },
            malware: { name: "æ¶æ„è½¯ä»¶", duration: 4000 }
        };

        let stats = {
            totalAttacks: 0,
            successfulAttacks: 0,
            resources: 100
        };

        function log(message, type = "info") {
            const logEntry = document.createElement('div');
            logEntry.className = 'log-entry';
            logEntry.innerHTML = `[${new Date().toLocaleTimeString()}] ${message}`;
            document.getElementById('logContainer').appendChild(logEntry);
            logEntry.scrollIntoView();
        }

        function updateProgress(percentage) {
            document.querySelector('.progress').style.width = percentage + '%';
        }

        function playSound(type) {
            if(typeof Audio !== 'undefined') {
                const sounds = {
                    warning: 'https://actions.google.com/sounds/v1/alarms/beep_short.ogg',
                    success: 'https://actions.google.com/sounds/v1/ui/success.ogg',
                    danger: 'https://actions.google.com/sounds/v1/alarms/alarm_clock.ogg'
                };
                new Audio(sounds[type]).play().catch(() => {});
            }
        }

        function startAttack(type) {
            if(isAttacking || stats.resources < 20) return;
            
            stats.totalAttacks++;
            stats.resources -= 20;
            updateStats();
            
            isAttacking = true;
            document.body.classList.add('attack-effect');
            setTimeout(() => document.body.classList.remove('attack-effect'), 500);
            
            playSound('warning');
            const attack = attackData[type];
            log(`ğŸš¨ å¼€å§‹${attack.name}...`, "warning");
            
            let progress = 0;
            const interval = setInterval(() => {
                progress += 1;
                updateProgress(progress);
                
                if(progress >= 100) {
                    clearInterval(interval);
                    isAttacking = false;
                    showAttackResult(type);
                }
            }, attack.duration / 100);
        }

        function showAttackResult(type) {
            const defenses = {
                firewall: document.getElementById('firewall').checked,
                captcha: document.getElementById('captcha').checked,
                waf: document.getElementById('waf').checked,
                ids: document.getElementById('ids').checked,
                twoFA: document.getElementById('2fa').checked
            };

            let result = "";
            switch(type) {
                case 'ddos':
                    result = defenses.firewall ? 
                    "ğŸ”¥ é˜²ç«å¢™æˆåŠŸé˜»æŒ¡DDoSæ”»å‡»ï¼" : 
                    "ğŸ’¥ DDoSæ”»å‡»æˆåŠŸï¼æœåŠ¡å™¨ç˜«ç—ª";
                    break;
                case 'bruteforce':
                    result = defenses.captcha ? 
                    "ğŸ” éªŒè¯ç é˜»æ­¢äº†æš´åŠ›ç ´è§£ï¼" : 
                    "ğŸ”“ å¯†ç ç ´è§£æˆåŠŸï¼è·å¾—ç®¡ç†å‘˜æƒé™";
                    break;
                case 'sql':
                    result = defenses.waf ? 
                    "ğŸ›¡ï¸ WAFæ‹¦æˆªSQLæ³¨å…¥æ”»å‡»ï¼" : 
                    "ğŸ’¾ æ•°æ®åº“è¢«æˆåŠŸæ³¨å…¥ï¼æ•°æ®æ³„éœ²";
                    break;
                case 'phishing':
                    result = "ğŸ£ ç”¨æˆ·ç‚¹å‡»äº†é’“é±¼é“¾æ¥ï¼" + 
                    (defenses.twoFA ? "ä½†åŒå› ç´ è®¤è¯ä¿æŠ¤äº†è´¦æˆ·" : "è´¦æˆ·å‡­æ®è¢«ç›—");
                    break;
                case 'xss':
                    result = defenses.waf ? 
                    "ğŸ›¡ï¸ WAFæ‹¦æˆªXSSæ”»å‡»ï¼" : 
                    "ğŸ“œ XSSæ”»å‡»æˆåŠŸï¼çªƒå–ç”¨æˆ·Cookie";
                    break;
                case 'malware':
                    result = defenses.ids ? 
                    "ğŸš« IDSæ£€æµ‹åˆ°æ¶æ„è½¯ä»¶ï¼" : 
                    "ğŸ¦  æ¶æ„è½¯ä»¶æ¤å…¥æˆåŠŸï¼ç³»ç»Ÿæ„ŸæŸ“";
                    break;
            }

            if(result.includes("æˆåŠŸ")) stats.successfulAttacks++;
            updateStats();
            log(result, result.includes("æˆåŠŸ") ? "danger" : "success");
            updateDefenseStatus();
        }

        function updateStats() {
            document.getElementById('resources').textContent = stats.resources;
            document.querySelector('#resourcePanel .progress').style.width = stats.resources + '%';
            
            const successRate = stats.totalAttacks > 0 ? 
                Math.round((stats.successfulAttacks / stats.totalAttacks) * 100) : 0;
            document.getElementById('successRate').textContent = successRate;
            
            document.getElementById('threatLevel').textContent = 
                successRate > 70 ? 'æé«˜' :
                successRate > 40 ? 'é«˜' :
                successRate > 20 ? 'ä¸­' : 'ä½';
        }

        function updateDefenseStatus() {
            const statusElement = document.getElementById('defenseStatus');
            statusElement.innerHTML = `
                ${document.getElementById('firewall').checked ? 'ğŸ›¡ï¸ é˜²ç«å¢™å·²å¯ç”¨' : 'âŒ é˜²ç«å¢™æœªå¯ç”¨'} <br>
                ${document.getElementById('captcha').checked ? 'âœ… éªŒè¯ç å·²å¯ç”¨' : 'âŒ éªŒè¯ç æœªå¯ç”¨'} <br>
                ${document.getElementById('waf').checked ? 'ğŸ”’ WAFè¿è¡Œä¸­' : 'âŒ WAFæœªå¯ç”¨'} <br>
                ${document.getElementById('ids').checked ? 'ğŸš¨ IDSç›‘æ§ä¸­' : 'âŒ IDSæœªå¯ç”¨'} <br>
                ${document.getElementById('2fa').checked ? 'ğŸ”‘ åŒå› ç´ è®¤è¯å¯ç”¨' : 'âŒ åŒå› ç´ è®¤è¯å…³é—­'}
            `;
        }

        // è‡ªåŠ¨æ¢å¤èµ„æº
        setInterval(() => {
            if(stats.resources < 100 && !isAttacking) {
                stats.resources = Math.min(stats.resources + 0.5, 100);
                updateStats();
            }
        }, 1000);

        // é…ç½®æŒä¹…åŒ–
        function saveConfig() {
            const config = {
                firewall: document.getElementById('firewall').checked,
                captcha: document.getElementById('captcha').checked,
                waf: document.getElementById('waf').checked,
                ids: document.getElementById('ids').checked,
                twoFA: document.getElementById('2fa').checked
            };
            localStorage.setItem('defenseConfig', JSON.stringify(config));
        }

        window.addEventListener('load', () => {
            const savedConfig = localStorage.getItem('defenseConfig');
            if(savedConfig) {
                const config = JSON.parse(savedConfig);
                Object.keys(config).forEach(key => {
                    document.getElementById(key).checked = config[key];
                });
                updateDefenseStatus();
            }
            log("æ¬¢è¿æ¥åˆ°ç½‘ç»œæ”»é˜²æ¨¡æ‹Ÿå™¨ï¼è¯·é€‰æ‹©æ”»å‡»æ–¹å¼å¹¶è§‚å¯Ÿé˜²å¾¡æ•ˆæœ");
        });

        document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
            checkbox.addEventListener('change', () => {
                updateDefenseStatus();
                saveConfig();
            });
        });
    </script>
</body>
</html>
